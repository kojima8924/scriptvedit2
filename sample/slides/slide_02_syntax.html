<!DOCTYPE html>
<html><head><meta charset="utf-8"><style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  width: 1920px; height: 1080px;
  background: #12121e;
  overflow: hidden;
  font-family: "Meiryo", "Yu Gothic", sans-serif;
}
.header {
  position: absolute; top: 50px; left: 80px;
  font-size: 38px; font-weight: bold; color: #648cff;
}
.header-line {
  position: absolute; top: 105px; left: 80px;
  width: 320px; height: 2px; background: #648cff;
}
.ops { position: absolute; top: 140px; left: 100px; }
.op-row { height: 42px; display: flex; align-items: center; }
.op-code {
  font-family: "Consolas", monospace; font-size: 22px;
  color: #ff8c50; width: 400px;
}
.op-desc { font-size: 22px; color: #a0a5b4; }
.code-block {
  position: absolute; top: 340px; left: 60px;
  width: 1060px; height: 290px;
  background: #1e1e32; border-radius: 12px;
  padding: 18px 24px; overflow: hidden;
}
.code-block pre {
  font-family: "Consolas", "Meiryo", monospace;
  font-size: 22px; line-height: 28px;
  white-space: pre; margin: 0;
}
.demo-area {
  position: absolute; top: 160px; left: 1170px;
  width: 680px; height: 720px;
  border: 2px solid rgba(100, 140, 255, 0.3);
  border-radius: 24px;
}
/* syntax colors */
.cm { color: #a0a5b4; } /* comment */
.w  { color: #f0f0f5; } /* white/default */
.op { color: #ff8c50; } /* operator */
.fn { color: #78dc8c; } /* function */
.n  { color: #64dcf0; } /* number */
.kw { color: #f082b4; } /* keyword */
.s  { color: #f0dc64; } /* string */
</style></head>
<body>
  <div class="header" id="hdr">直感的な DSL 構文</div>
  <div class="header-line" id="hline"></div>

  <div class="ops" id="ops">
    <div class="op-row"><span class="op-code">obj &lt;= transform</span><span class="op-desc">Transform 適用</span></div>
    <div class="op-row"><span class="op-code">t1 | t2</span><span class="op-desc">Transform 連結</span></div>
    <div class="op-row"><span class="op-code" style="color:#78dc8c">e1 &amp; e2</span><span class="op-desc">Effect 合成</span></div>
    <div class="op-row"><span class="op-code" style="color:#78dc8c">obj.time(N) &lt;= effect</span><span class="op-desc">時間付きEffect</span></div>
  </div>

  <div class="code-block" id="code"><pre>
<span class="cm"># Transform chain</span>
<span class="w">obj</span><span class="op"> &lt;= </span><span class="fn">resize</span><span class="w">(sx=</span><span class="n">0.5</span><span class="w">) </span><span class="op">| </span><span class="fn">rotate</span><span class="w">(deg=</span><span class="n">45</span><span class="w">)</span>

<span class="cm"># 時間変化する Effect</span>
<span class="w">obj</span><span class="w">.time(</span><span class="n">6</span><span class="w">) </span><span class="op">&lt;= </span><span class="fn">move</span><span class="w">(</span>
<span class="w">    x=</span><span class="kw">lambda</span><span class="w"> u: </span><span class="n">0.5</span><span class="w"> + </span><span class="n">0.3</span><span class="w"> * </span><span class="fn">sin</span><span class="w">(u * PI),</span>
<span class="w">    y=</span><span class="n">0.5</span><span class="w">, anchor=</span><span class="s">"center"</span><span class="w">,</span>
<span class="w">) </span><span class="fn">&amp; </span><span class="fn">fade</span><span class="w">(</span><span class="kw">lambda</span><span class="w"> u: </span><span class="n">1</span><span class="w"> - u * </span><span class="n">0.3</span><span class="w">)</span></pre>
  </div>

  <div class="demo-area" id="demoArea"></div>

<script>
function renderFrame(state) {
  var u = state.u;
  document.getElementById('hdr').style.opacity = Math.min(1, u * 8);
  document.getElementById('hline').style.opacity = Math.min(1, Math.max(0, (u - 0.03) * 8));
  // ops rows
  var rows = document.querySelectorAll('.op-row');
  for (var i = 0; i < rows.length; i++) {
    rows[i].style.opacity = Math.min(1, Math.max(0, (u - 0.05 - i * 0.02) * 8));
  }
  document.getElementById('code').style.opacity = Math.min(1, Math.max(0, (u - 0.15) * 5));
  document.getElementById('demoArea').style.opacity = Math.min(1, Math.max(0, (u - 0.12) * 5));
}
</script>
</body></html>
